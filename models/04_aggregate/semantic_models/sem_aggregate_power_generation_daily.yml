semantic_models:
- name: aggregate_power_generation_daily
  description: Daily aggregated power generation data from German power plants with weather and location details. Data includes traditional and renewable energy sources across Germany.
  model: ref('aggregate_power_generation_daily')
  defaults:
    agg_time_dimension: generation_date
  entities:
  - name: power_generation_unit
    type: primary
    expr: power_generation_unit_id
  dimensions:
  - name: generation_date
    type: time
    type_params:
      time_granularity: day
    description: "Date when power was generated. Use __year, __month, __day suffixes for time-based aggregations."
  - name: unit_name
    type: categorical
    description: "Name of the power generation unit/facility"
  - name: operator
    type: categorical
    description: "Company or entity operating the power generation unit"
  - name: unit_city
    type: categorical
    description: "City where the power generation unit is located"
  - name: unit_state
    type: categorical
    description: "German state (Bundesland) where the power generation unit is located. Examples: 'Bayern', 'Nordrhein-Westfalen', 'Baden-Württemberg', 'Niedersachsen'."
  - name: energy_source
    type: categorical
    description: "Type of energy source. Valid values: 'Battery Storage', 'Biomass', 'Hard Coal', 'Heat', 'Lignite', 'Mine Gas', 'Mineral Oil Products', 'Natural Gas', 'Nuclear Energy', 'Other Non-Renewable Energy Carriers', 'Pumped Storage', 'Waste', 'Water'. Note: This German dataset does not include 'Solar' or 'Wind' as separate categories."
  - name: plant_status
    type: categorical
    description: "Current operational status of the plant. Valid values: 'Capacity reserve', 'Grid reserve', 'In operation', 'Permanently shut down', 'Special grid equipment', 'Temporarily shut down'. Can be null."
  - name: is_storage
    type: categorical
    description: "Boolean flag indicating if the unit is a storage facility (battery or pumped storage) vs a generation facility. Values: 'true' or 'false'."
  measures:
  # Capacity Metrics
  - name: gross_capacity_mw
    agg: max
    create_metric: true
    description: "Gross electrical capacity in megawatts (rated capacity including auxiliary power consumption)"
    label: "Gross Capacity (MW)"
  - name: net_electrical_capacity_mw
    agg: max
    create_metric: true
    description: "Net electrical capacity in megawatts (capacity available for grid export after auxiliary consumption)"
    label: "Net Capacity (MW)"

  # Generation Metrics
  - name: number_of_readings
    agg: count
    expr: 1
    create_metric: true
    description: "Number of power generation readings/records"
    label: "Number of Readings"
  - name: total_duration_hours
    agg: sum
    create_metric: true
    description: "Total duration of power generation in hours"
    label: "Total Duration (Hours)"
  - name: total_energy_mwh
    agg: sum
    create_metric: true
    description: "Total energy generated in megawatt-hours (MWh). Sum of power output multiplied by duration."
    label: "Total Energy Generated (MWh)"
  - name: avg_power_mw
    agg: average
    create_metric: true
    description: "Average power output in megawatts during the period"
    label: "Average Power (MW)"
  - name: min_power_mw
    agg: min
    create_metric: true
    description: "Minimum power output in megawatts during the period"
    label: "Minimum Power (MW)"
  - name: max_power_mw
    agg: max
    create_metric: true
    description: "Maximum power output in megawatts during the period"
    label: "Peak Power (MW)"
  - name: stddev_power_mw
    agg: average
    create_metric: true
    description: "Standard deviation of power output, indicating variability"
    label: "Power Output Variability (StdDev)"

  # Utilization Metrics
  - name: avg_capacity_utilization_percent
    agg: average
    create_metric: true
    description: "Average capacity utilization as percentage of net electrical capacity"
    label: "Average Capacity Utilization (%)"
  - name: max_capacity_utilization_percent
    agg: max
    create_metric: true
    description: "Peak capacity utilization as percentage of net electrical capacity"
    label: "Peak Capacity Utilization (%)"

  # Weather Metrics - Temperature
  - name: avg_temperature_2m_c
    agg: average
    create_metric: true
    description: "Average temperature at 2 meters above ground in Celsius"
    label: "Average Temperature (°C)"
  - name: min_temperature_2m_c
    agg: min
    create_metric: true
    description: "Minimum temperature at 2 meters above ground in Celsius"
    label: "Minimum Temperature (°C)"
  - name: max_temperature_2m_c
    agg: max
    create_metric: true
    description: "Maximum temperature at 2 meters above ground in Celsius"
    label: "Maximum Temperature (°C)"

  # Weather Metrics - Wind
  - name: avg_wind_speed_10m_mps
    agg: average
    create_metric: true
    description: "Average wind speed at 10 meters height in meters per second"
    label: "Average Wind Speed at 10m (m/s)"
  - name: avg_wind_speed_80m_mps
    agg: average
    create_metric: true
    description: "Average wind speed at 80 meters height in meters per second (typical wind turbine height)"
    label: "Average Wind Speed at 80m (m/s)"

  # Weather Metrics - Solar Radiation
  - name: avg_shortwave_radiation_wpm2
    agg: average
    create_metric: true
    description: "Average shortwave radiation in watts per square meter (total solar radiation)"
    label: "Average Solar Radiation (W/m²)"
  - name: avg_direct_radiation_wpm2
    agg: average
    create_metric: true
    description: "Average direct solar radiation in watts per square meter (beam radiation)"
    label: "Average Direct Solar Radiation (W/m²)"
  - name: avg_diffuse_radiation_wpm2
    agg: average
    create_metric: true
    description: "Average diffuse solar radiation in watts per square meter (scattered radiation)"
    label: "Average Diffuse Solar Radiation (W/m²)"

  # Weather Metrics - Precipitation
  - name: total_precipitation_mm
    agg: sum
    create_metric: true
    description: "Total precipitation (rain + snow water equivalent) in millimeters"
    label: "Total Precipitation (mm)"
  - name: total_rain_mm
    agg: sum
    create_metric: true
    description: "Total rainfall in millimeters"
    label: "Total Rainfall (mm)"
  - name: total_snowfall_cm
    agg: sum
    create_metric: true
    description: "Total snowfall in centimeters"
    label: "Total Snowfall (cm)"

  # Weather Metrics - Other
  - name: avg_cloud_cover_percent
    agg: average
    create_metric: true
    description: "Average cloud cover as percentage (0% = clear sky, 100% = completely overcast)"
    label: "Average Cloud Cover (%)"
  - name: avg_pressure_msl_hpa
    agg: average
    create_metric: true
    description: "Average atmospheric pressure at mean sea level in hectopascals"
    label: "Average Pressure (hPa)"

  # Entity Count
  - name: count_power_generation_unit
    agg: count
    create_metric: true
    expr: power_generation_unit_id
    description: "Number of distinct power generation units"
    label: "Number of Units"
